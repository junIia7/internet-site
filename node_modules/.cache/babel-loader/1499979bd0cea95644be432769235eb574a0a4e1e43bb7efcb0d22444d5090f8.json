{"ast":null,"code":"import _slicedToArray from\"D:/site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{useEffect}from\"react\";import MyButton from\"./UI/button/mybutton\";import{Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostItem=function PostItem(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),completed=_useState2[0],setCompleted=_useState2[1];useEffect(function(){for(var j=0;j<props.posts.length;j++)if(props.posts[j].id===props.post.id)setCompleted(props.posts[j].completed);},[props.posts]);useEffect(function(){for(var j=0;j<props.donePosts.length;j++)if(props.donePosts[j].id===props.post.id)setCompleted(props.donePosts[j].completed);},[props.donePosts]);var handleCheckbox=function handleCheckbox(){setCompleted(!completed);var key;var postsArray;for(var i=0;i<localStorage.length;i++){key=localStorage.key(i);var value=localStorage.getItem(key);if(key.startsWith('{\"login\":')){try{if(value.length===0)continue;postsArray=JSON.parse(value);for(var j=0;j<postsArray.length;j++)if(props.post.id===postsArray[j].id){if(props.flag===true){var found=props.posts.find(function(item){return item.id===props.post.id;});props.remove(found,props.posts,props.donePosts);found.completed=!found.completed;props.create(found,props.donePosts,props.posts);}else{var _found=props.donePosts.find(function(item){return item.id===props.post.id;});props.remove(_found,props.donePosts,props.posts);_found.completed=!_found.completed;props.create(_found,props.posts,props.donePosts);}}}catch(error){console.error('Ошибка при разборе данных:',error);}}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"chb\",onChange:handleCheckbox,checked:completed}),/*#__PURE__*/_jsxs(\"div\",{className:\"post__content\",children:[/*#__PURE__*/_jsx(\"strong\",{style:{fontSize:20,fontFamily:'cursive'},children:props.post.title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,fontFamily:'cursive'},children:props.post.body})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MyButton,{onClick:function onClick(){return props.remove(props.post,props.flag?props.posts:props.donePosts,props.flag?props.donePosts:props.posts);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{})]})]});};export default PostItem;","map":{"version":3,"names":["React","useState","useEffect","MyButton","Button","jsx","_jsx","jsxs","_jsxs","PostItem","props","_useState","_useState2","_slicedToArray","completed","setCompleted","j","posts","length","id","post","donePosts","handleCheckbox","key","postsArray","i","localStorage","value","getItem","startsWith","JSON","parse","flag","found","find","item","remove","create","error","console","className","children","type","onChange","checked","style","fontSize","fontFamily","title","body","onClick"],"sources":["D:/site/src/components/PostItem.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {useState} from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport MyButton from \"./UI/button/mybutton\";\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst PostItem = (props) => {\r\n\r\n    const [completed, setCompleted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        for (let j = 0; j < props.posts.length; j++)\r\n            if (props.posts[j].id === props.post.id)\r\n                setCompleted(props.posts[j].completed);\r\n    }, [props.posts])\r\n\r\n    useEffect(() => {\r\n        for (let j = 0; j < props.donePosts.length; j++)\r\n            if (props.donePosts[j].id === props.post.id)\r\n                setCompleted(props.donePosts[j].completed);\r\n    }, [props.donePosts])\r\n\r\n    const handleCheckbox = () => {\r\n        setCompleted(!completed);\r\n\r\n        let key;\r\n        let postsArray;\r\n\r\n        for(let i = 0; i < localStorage.length; i++) {\r\n            key = localStorage.key(i);\r\n            const value = localStorage.getItem(key);\r\n\r\n            if (key.startsWith('{\"login\":')) {\r\n                try {\r\n                    if(value.length === 0)\r\n                        continue;\r\n                    postsArray = JSON.parse(value);\r\n                    for(let j = 0; j < postsArray.length; j++) \r\n                        if(props.post.id === postsArray[j].id) {\r\n                            if(props.flag === true) {\r\n                                const found = props.posts.find(item => item.id === props.post.id);\r\n\r\n                                props.remove(found, props.posts, props.donePosts);\r\n                                found.completed = !found.completed;\r\n                                props.create(found, props.donePosts, props.posts);\r\n                                \r\n                            }\r\n                            else {\r\n                                const found = props.donePosts.find(item => item.id === props.post.id);\r\n\r\n                                props.remove(found, props.donePosts, props.posts);\r\n                                found.completed = !found.completed;\r\n                                props.create(found, props.posts, props.donePosts);\r\n                            }\r\n                        }\r\n                }\r\n                catch (error) {\r\n                    console.error('Ошибка при разборе данных:', error);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"post\">\r\n            <input type=\"checkbox\" className=\"chb\" onChange={handleCheckbox} checked={completed}/>\r\n            <div className=\"post__content\">\r\n                <strong style={{fontSize:20, fontFamily:'cursive'}}>{props.post.title}</strong>\r\n                <div style={{fontSize:15, fontFamily:'cursive'}}>\r\n                    {props.post.body}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <MyButton onClick={() => props.remove(props.post, props.flag ? props.posts : props.donePosts,\r\n                    props.flag ? props.donePosts : props.posts)}>\r\n                    Удалить\r\n                </MyButton>\r\n                <Button/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostItem"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}