{"ast":null,"code":"import _objectSpread from\"D:/site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import InputLogin from\"./UI/login/inputlogin\";import MyButton from\"./UI/button/mybutton\";import classes from\"./UI/login/InputLogin.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var AccessAllowed=_ref.AccessAllowed,AccessRestricted=_ref.AccessRestricted,onLogin=_ref.onLogin;var _useState=useState({login:'',password:''}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],SetuserData=_useState2[1];var HandleLogin=function HandleLogin(UserData){var flag=0;// Пройдем по всем элементам localStorage\nfor(var i=0;i<localStorage.length;i++){var key=localStorage.key(i);// Получаем ключ (имя) текущего элемента\nvar value=localStorage.getItem(key);// Получаем значение (данные) текущего элемента\nconsole.log(key);if(key.startsWith('userData_')){try{var _userData=JSON.parse(value);if(_userData.login===UserData.login){if(_userData.password===UserData.password){AccessAllowed(_userData);onLogin(_userData);}else AccessRestricted();flag=1;console.log(flag);}}catch(error){console.error('Ошибка при разборе данных:',error);}}}if(!flag){AccessAllowed(userData);onLogin(userData);console.log(\"jsnsjnfd\");}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.login,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0412\\u0445\\u043E\\u0434 \\u0438 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(InputLogin,{type:\"text\",placeholder:\"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",value:userData.username,onChange:function onChange(e){return SetuserData(_objectSpread(_objectSpread({},userData),{},{login:e.target.value}));}}),/*#__PURE__*/_jsx(InputLogin,{type:\"text\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:userData.password,onChange:function onChange(e){return SetuserData(_objectSpread(_objectSpread({},userData),{},{password:e.target.value}));}}),/*#__PURE__*/_jsx(MyButton,{onClick:function onClick(){HandleLogin(userData);},children:\"\\u0412\\u0445\\u043E\\u0434\"})]});};export default Login;","map":{"version":3,"names":["React","useState","InputLogin","MyButton","classes","jsx","_jsx","jsxs","_jsxs","Login","_ref","AccessAllowed","AccessRestricted","onLogin","_useState","login","password","_useState2","_slicedToArray","userData","SetuserData","HandleLogin","UserData","flag","i","localStorage","length","key","value","getItem","console","log","startsWith","JSON","parse","error","className","children","type","placeholder","username","onChange","e","_objectSpread","target","onClick"],"sources":["D:/site/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport InputLogin from \"./UI/login/inputlogin\";\r\nimport MyButton from \"./UI/button/mybutton\";\r\nimport classes from \"./UI/login/InputLogin.module.css\"\r\n\r\nconst Login = ({ AccessAllowed, AccessRestricted, onLogin }) => {\r\n\r\n    const [userData, SetuserData] = useState({login: '', password: ''})\r\n\r\n    const HandleLogin = (UserData) => {\r\n        var flag = 0;\r\n        // Пройдем по всем элементам localStorage\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            const key = localStorage.key(i); // Получаем ключ (имя) текущего элемента\r\n            const value = localStorage.getItem(key); // Получаем значение (данные) текущего элемента\r\n\r\n            console.log(key);\r\n            if (key.startsWith('userData_')) {\r\n                try {\r\n                    const userData = JSON.parse(value);\r\n                    if (userData.login === UserData.login) {\r\n                        if (userData.password === UserData.password) {\r\n                            AccessAllowed(userData);\r\n                            onLogin(userData);\r\n                        }\r\n                        else \r\n                            AccessRestricted();\r\n                        flag = 1;\r\n                        console.log(flag);\r\n                    }\r\n                } \r\n                catch (error) {\r\n                    console.error('Ошибка при разборе данных:', error);\r\n                }\r\n            }\r\n        }\r\n        if(!flag){\r\n            AccessAllowed(userData)\r\n            onLogin(userData);\r\n            console.log(\"jsnsjnfd\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.login}>\r\n            <h3>Вход и регистрация</h3>\r\n            <InputLogin\r\n                type=\"text\"\r\n                placeholder='Имя пользователя'\r\n                value={userData.username}\r\n                onChange={e => SetuserData({ ...userData, login: e.target.value })}\r\n            />\r\n            <InputLogin \r\n                type=\"text\"\r\n                placeholder='Пароль'\r\n                value={userData.password}\r\n                onChange={e => SetuserData({ ...userData, password: e.target.value })}\r\n            />\r\n            <MyButton onClick={() => {HandleLogin(userData)}}>Вход</MyButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}