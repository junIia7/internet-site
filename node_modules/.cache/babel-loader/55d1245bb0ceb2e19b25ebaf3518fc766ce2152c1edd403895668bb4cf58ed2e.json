{"ast":null,"code":"import _toConsumableArray from\"D:/site/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/site/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useEffect}from'react';import\"./styles/app.css\";import PostList from'./components/PostList';import PostForm from'./components/PostForm';import Login from'./components/Login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var getPosts=function getPosts(user){var SavedPosts=null;if(user){var userKey=\"userData_\".concat(user.login);SavedPosts=localStorage.getItem(userKey+user.password);// берем элемент из стораж\n}if(SavedPosts){setPosts(JSON.parse(SavedPosts));// парсим в строку все объекты\nconsole.log(\"ЕСТЬ ПОСТЫ \"+SavedPosts);}else{setPosts([]);console.log(\"НЕТ ПОСТОВ \"+SavedPosts);}};var savePosts=function savePosts(posts){console.log(user);if(user){var userKey=\"userData_\".concat(user.login);localStorage.setItem(userKey+\"\"+user.password,JSON.stringify(posts));// кладем элемент в стораж\nconsole.log(user);}else console.log(\"sjnjsf\");};var createPost=function createPost(newPost){if(newPost.title!==''&&newPost.body!==''){setPosts([].concat(_toConsumableArray(posts),[newPost]));// задаем все элементы\nsavePosts([].concat(_toConsumableArray(posts),[newPost]));// сохраняем все и последний\nconsole.log(posts);}};var removePost=function removePost(post){setPosts(posts.filter(function(p){return p.id!==post.id;}));// задаем\nsavePosts(posts.filter(function(p){return p.id!==post.id;}));// сохраняем\n};var WrongPassword=function WrongPassword(){alert('Неправильный пароль');};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Login,{AccessAllowed:getPosts,AccessRestricted:WrongPassword,onLogin:function onLogin(user){return setUser(user);}}),/*#__PURE__*/_jsx(PostForm,{create:createPost}),posts.length!==0?/*#__PURE__*/_jsx(PostList,{posts:posts,title:\"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0434\\u0435\\u043B\",remove:removePost}):/*#__PURE__*/_jsx(\"h1\",{style:{fontFamily:'sans-serif',textAlign:'center'},children:\"\\u0414\\u0435\\u043B \\u043D\\u0435\\u0442\"})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","PostList","PostForm","Login","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","user","setUser","getPosts","SavedPosts","userKey","concat","login","localStorage","getItem","password","JSON","parse","console","log","savePosts","setItem","stringify","createPost","newPost","title","body","_toConsumableArray","removePost","post","filter","p","id","WrongPassword","alert","className","children","AccessAllowed","AccessRestricted","onLogin","create","length","remove","style","fontFamily","textAlign"],"sources":["D:/site/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport \"./styles/app.css\"\r\nimport PostList from './components/PostList';\r\nimport PostForm from './components/PostForm';\r\nimport Login from './components/Login';\r\n\r\nfunction App() {\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const [user, setUser] = useState(null);\r\n\r\n    const getPosts = (user) => {\r\n        var SavedPosts = null;\r\n        if(user) {\r\n            const userKey = `userData_${user.login}`;\r\n            SavedPosts = localStorage.getItem(userKey+user.password); // берем элемент из стораж\r\n        }\r\n        if (SavedPosts) {\r\n            setPosts(JSON.parse(SavedPosts)); // парсим в строку все объекты\r\n            console.log(\"ЕСТЬ ПОСТЫ \"+SavedPosts);\r\n        }\r\n        else {\r\n            setPosts([]);\r\n            console.log(\"НЕТ ПОСТОВ \"+SavedPosts);\r\n        }\r\n    }\r\n\r\n    const savePosts = (posts) => {\r\n        console.log(user);\r\n        if(user) {\r\n            const userKey = `userData_${user.login}`;\r\n            localStorage.setItem(userKey+\"\"+user.password, JSON.stringify(posts)); // кладем элемент в стораж\r\n            console.log(user);\r\n        }\r\n        else\r\n            console.log(\"sjnjsf\");\r\n    }\r\n\r\n    const createPost = (newPost) => {\r\n        if (newPost.title !== '' && newPost.body !== '') { \r\n            setPosts([...posts, newPost]) // задаем все элементы\r\n            savePosts([...posts, newPost]); // сохраняем все и последний\r\n            console.log(posts);\r\n        }\r\n\r\n    }\r\n\r\n    const removePost = (post) => {\r\n        setPosts(posts.filter(p => p.id !== post.id)); // задаем\r\n        savePosts(posts.filter(p => p.id !== post.id)); // сохраняем\r\n    }\r\n\r\n    const WrongPassword = () => {\r\n        alert('Неправильный пароль');\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            { \r\n            <Login AccessAllowed={getPosts} AccessRestricted={WrongPassword} onLogin={(user) => setUser(user)}/>\r\n            }\r\n            <PostForm create={createPost} />\r\n            {\r\n                posts.length !== 0\r\n                ?\r\n                <PostList posts={posts} title=\"Список дел\" remove={removePost} />\r\n                :\r\n                <h1 style={{ fontFamily: 'sans-serif', textAlign: 'center' }}>\r\n                    Дел нет\r\n                </h1>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}